# 機能追加提案

## 優先度別の機能提案

### 🔥 優先度: 最高（ユーザー価値が高く、実装が比較的容易）

#### 1. **投稿の編集・削除機能の改善** ⭐⭐⭐
**現状**: 投稿の編集・削除機能は実装済みだが、UI/UXの改善の余地あり

**提案内容**:
- 投稿カードに編集・削除ボタンを追加（投稿者のみ表示）
- 削除確認モーダルの追加
- 編集履歴の表示（オプション）
- 削除された投稿の表示（「この投稿は削除されました」）

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐⭐（高）
**実装時間**: 2-3日

---

#### 2. **投稿の保存・ブックマーク機能** ⭐⭐⭐
**現状**: 未実装

**提案内容**:
- 投稿を保存する機能（後で読む）
- 保存した投稿一覧ページ
- 保存した投稿の検索・フィルタリング
- 保存した投稿への通知（投稿が更新された場合）

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐⭐（高）
**実装時間**: 3-4日

**データモデル**:
- `saved_posts`テーブル（user_id, post_id, created_at）

---

#### 3. **投稿のシェア機能** ⭐⭐
**現状**: 未実装

**提案内容**:
- 投稿URLのコピー機能
- SNSシェアボタン（Twitter, Facebook等）
- メッセージ経由でのシェア
- シェア数の表示

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐（中）
**実装時間**: 2-3日

---

#### 4. **投稿の検索機能** ⭐⭐⭐
**現状**: ハッシュタグ検索は実装済み

**提案内容**:
- 投稿内容の全文検索
- 投稿者による検索
- 日付範囲での検索
- 保存した検索条件

**実装難易度**: ⭐⭐⭐（中）
**ユーザー価値**: ⭐⭐⭐（高）
**実装時間**: 4-5日

**技術要件**:
- PostgreSQLの全文検索機能（tsvector）またはElasticsearch

---

### 🚀 優先度: 高（ユーザー価値が高く、実装に時間がかかる）

#### 5. **健康記録機能（簡易版）** ⭐⭐⭐
**現状**: Phase 4で計画されているが未実装

**提案内容（MVP版）**:
- 日記機能（テキストベース）
- 症状メモ
- カレンダー表示
- 簡単なグラフ表示（症状の推移）

**実装難易度**: ⭐⭐⭐（中）
**ユーザー価値**: ⭐⭐⭐（高）
**実装時間**: 1-2週間

**段階的実装**:
1. Phase 1: 日記・症状メモ（テキストのみ）
2. Phase 2: カレンダー表示
3. Phase 3: グラフ表示
4. Phase 4: バイタル記録（血圧、体温、体重）

---

#### 6. **ユーザー統計・分析ダッシュボード** ⭐⭐
**現状**: 未実装

**提案内容**:
- ユーザーの投稿数、コメント数、いいね数の統計
- アクティビティグラフ（週別、月別）
- フォロワー/フォロー中の推移
- 疾患別の活動状況

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐（中）
**実装時間**: 3-4日

---

#### 7. **通知設定のカスタマイズ** ⭐⭐
**現状**: 通知機能は実装済みだが、設定が限定的

**提案内容**:
- 通知タイプごとのON/OFF設定
- メール通知の設定
- プッシュ通知の設定
- 通知頻度の設定（即座、日次、週次）

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐（中）
**実装時間**: 2-3日

**データモデル**:
- `user_notification_settings`テーブル

---

### 💡 優先度: 中（UX改善・機能強化）

#### 8. **投稿の下書き保存機能** ⭐⭐
**現状**: 未実装

**提案内容**:
- 投稿作成時の下書き保存
- 下書き一覧
- 下書きの自動保存（ローカルストレージ）
- 下書きの編集・削除

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐⭐（中）
**実装時間**: 2-3日

---

#### 9. **投稿のスレッド表示** ⭐
**現状**: コメントは実装済みだが、スレッド表示が限定的

**提案内容**:
- コメントのスレッド表示の改善
- コメントの折りたたみ/展開
- コメントの並び替え（新着順、人気順）
- コメントのフィルタリング

**実装難易度**: ⭐⭐（低）
**ユーザー価値**: ⭐（低）
**実装時間**: 2-3日

---

#### 10. **ユーザー推薦機能** ⭐⭐
**現状**: ユーザー検索は実装済み

**提案内容**:
- 同じ疾患を持つユーザーの推薦
- 相互フォローしているユーザーの推薦
- アクティブなユーザーの推薦
- 「あなたへのおすすめ」セクション

**実装難易度**: ⭐⭐⭐（中）
**ユーザー価値**: ⭐⭐（中）
**実装時間**: 3-4日

---

### 🔧 優先度: 低（技術的改善）

#### 11. **E2Eテストの導入** ⭐
**現状**: ユニットテスト、統合テストは実装済み

**提案内容**:
- PlaywrightによるE2Eテスト
- 主要フローのテスト（ログイン、投稿作成、コメント）
- CI/CDへの統合

**実装難易度**: ⭐⭐⭐（中）
**ユーザー価値**: ⭐（低、開発者向け）
**実装時間**: 1週間

---

#### 12. **パフォーマンス監視の強化** ⭐
**現状**: 基本的なロギングは実装済み

**提案内容**:
- Google Cloud Monitoringの活用
- エラー追跡（Sentry）の導入
- パフォーマンスメトリクスの可視化
- アラート設定

**実装難易度**: ⭐⭐⭐（中）
**ユーザー価値**: ⭐（低、運用者向け）
**実装時間**: 3-4日

---

## 推奨実装順序

### 短期（1-2週間）
1. **投稿の保存・ブックマーク機能** - ユーザー価値が高く、実装が容易
2. **投稿の編集・削除機能の改善** - UX改善
3. **通知設定のカスタマイズ** - ユーザー満足度向上

### 中期（1ヶ月）
4. **投稿の検索機能** - ユーザー価値が高い
5. **健康記録機能（簡易版）** - プラットフォームの核心機能
6. **ユーザー統計・分析ダッシュボード** - エンゲージメント向上

### 長期（2-3ヶ月）
7. **E2Eテストの導入** - 品質保証
8. **パフォーマンス監視の強化** - 運用改善

---

## 実装時の考慮事項

### データベース設計
- 新しい機能を追加する際は、既存のデータモデルとの整合性を確認
- インデックスの追加を検討（パフォーマンス向上のため）

### パフォーマンス
- 大量のデータを扱う機能（検索、統計）は、パフォーマンステストを実施
- 必要に応じてキャッシュを導入

### セキュリティ
- ユーザー入力のバリデーション
- 権限チェックの実装
- SQLインジェクション対策

### 国際化
- すべての新機能は多言語対応（日本語・英語）
- 翻訳キーの追加

### テスト
- ユニットテストの追加
- 統合テストの追加
- E2Eテストの追加（主要フロー）

---

## 参考

- [Progress.md](../Progress.md) - 現在の実装状況
- [INTERNATIONALIZATION.md](../INTERNATIONALIZATION.md) - 国際化実装ガイド
- [COST_OPTIMIZATION.md](./COST_OPTIMIZATION.md) - コスト最適化ガイド






